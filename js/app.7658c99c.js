(function(){"use strict";var t={406:function(t,e,i){var a=i(6369),r=i(8499),s=i.n(r),o=i(4582),n=i(2198),l=i(5743),c=i.n(l),d=(i(1015),i(841)),u=i.n(d),f=i(8263),h=i.n(f),p=i(922),m=i.n(p),g=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper",attrs:{id:"app"}},[e("router-view")],1)},b=[],y=i(1001),v={},_=(0,y.Z)(v,g,b,!1,null,null,null),w=_.exports,E=i(2631),S=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"blue-wrap"},[e("div",{staticClass:"container"},[e("div",{staticClass:"top-bar"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.changeRoleTitle,placement:"bottom-end"}},[e("i",{staticClass:"text_24 text_white cp",class:t.userIcon,on:{click:t.changeRole}})])],1),e("p",{staticClass:"text_white text_b mb_20",staticStyle:{"font-size":"80px"}},[t._v(" Кольцово ")]),e("p",{staticClass:"text_40 text_white mb_40"},[t._v("Онлайн-табло")]),e("el-radio-group",{model:{value:t.component,callback:function(e){t.component=e},expression:"component"}},[e("el-radio-button",{attrs:{label:"ScoreboardDeparture",border:""}},[t._v("Вылет")]),e("el-radio-button",{attrs:{label:"ScoreboardArrival",border:""}},[t._v("Прилёт")])],1),e("img",{staticClass:"plane",attrs:{src:"/back-img.png",alt:""}})],1)]),e("div",{staticClass:"container mt_40"},[e(t.component,{tag:"component"})],1)])},T=[],k=i(3822);const x="CITIES_GET",C="AIRLINES_GET",I="USER_ROLE_CHANGE";var $=function(){var t=this,e=t._self._c;return e("scoreboard-table")},F=[];const D="FLIGHTS_LIST_REQUEST",A="FLIGHTS_LIST_SUCCESS",O="FLIGHT_ADD",L="FLIGHT_UPDATE",j="FLIGHT_DELETE",N="TYPE_SET";var P=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.flights.loading,expression:"flights.loading"}]},[e("div",{staticClass:"flex mb_32"},[e("el-input",{attrs:{size:"small",placeholder:"Поиск"},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}}),t.dictionary.isAdmin?e("el-button",{staticClass:"ml_24",attrs:{size:"small",type:"success"},on:{click:function(e){return t.openDialogEditForm(null)}}},[t._v(" Добавить рейс ")]):t._e()],1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.search}},[e("el-table-column",{attrs:{label:"Время по расписанию","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("p",[t._v(t._s(t.$dayjs(i.row.dateTime).utc(!0).format("DD.MM LT")))])]}}])}),e("el-table-column",{attrs:{label:"№ рейса","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(i.row.flightNumber))])]}}])}),e("el-table-column",{attrs:{label:"Авиакомпания","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.airline.name,placement:"top-start"}},[e("img",{staticClass:"airline-logo",attrs:{src:t.row.airline.logoLink,alt:t.row.airline.name}})])]}}])}),e("el-table-column",{attrs:{label:"Направление","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("p",[t._v(t._s(i.row.direction))])]}}])}),e("el-table-column",{attrs:{label:"Статус","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("p",{class:t.statusColor(i.row.dateTime)},[t._v(" "+t._s(t.statusTitle(i.row.dateTime))+" ")])]}}])}),t.dictionary.isAdmin?e("el-table-column",{attrs:{align:"right","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{staticClass:"mr_8",attrs:{icon:"el-icon-edit",size:"mini"},on:{click:function(e){return t.openDialogEditForm(i.row)}}}),e("el-popconfirm",{attrs:{title:"Удалить рейс?"},on:{confirm:function(e){return t.handleDelete(i.row)}}},[e("el-button",{attrs:{slot:"reference",size:"mini",icon:"el-icon-delete",type:"danger"},slot:"reference"})],1)]}}],null,!1,1074756098)}):t._e()],1),e("flight-edit-form",{ref:"dialogEditForm"})],1)},Z=[],H=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.titles.dialogTitle,visible:t.dialogVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(e){t.dialogVisible=e},closed:t.closed}},[t.flightEdit?e("el-form",{ref:"flightForm",attrs:{model:t.flightEdit,rules:t.rules,"label-position":"top"},nativeOn:{submit:function(t){t.preventDefault()}}},[e("div",{staticClass:"flex"},[e("el-form-item",{staticClass:"mr_32",attrs:{label:t.titles.direction,prop:"direction"}},[e("el-autocomplete",{staticStyle:{width:"220px"},attrs:{"fetch-suggestions":t.citySuggestion,clearable:""},on:{select:t.cityHandleSelect},scopedSlots:t._u([{key:"default",fn:function({item:i}){return[e("div",{staticClass:"value"},[t._v(t._s(i))])]}}],null,!1,2643476368),model:{value:t.flightEdit.direction,callback:function(e){t.$set(t.flightEdit,"direction",e)},expression:"flightEdit.direction"}})],1),e("el-form-item",{attrs:{label:t.titles.dateTime,prop:"dateTime"}},[e("el-date-picker",{attrs:{type:"datetime",format:"dd-MM-yyyy HH:mm","picker-options":t.pickerOptions,placeholder:"Дата время"},model:{value:t.flightEdit.dateTime,callback:function(e){t.$set(t.flightEdit,"dateTime",e)},expression:"flightEdit.dateTime"}})],1)],1),e("div",{staticClass:"flex"},[e("el-form-item",{staticClass:"mr_32",attrs:{label:"Авиакомпания",prop:"airlineId"}},[e("el-select",{staticStyle:{width:"220px"},attrs:{label:"Выбор авиакомпании",remote:"","remote-method":t.getAirlines,filterable:"",placeholder:"Выбрать"},on:{change:t.setAirline},model:{value:t.flightEdit.airlineId,callback:function(e){t.$set(t.flightEdit,"airlineId",e)},expression:"flightEdit.airlineId"}},t._l(t.airlines,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),e("el-form-item",{attrs:{label:"Номер рейса",prop:"flightNumber"}},[e("el-input",{staticStyle:{width:"220px"},model:{value:t.flightEdit.flightNumber,callback:function(e){t.$set(t.flightEdit,"flightNumber",e)},expression:"flightEdit.flightNumber"}})],1)],1)]):t._e(),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("Отмена")]),e("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v(t._s(t.titles.saveButton))])],1)],1)},V=[];class R{constructor(t,e){this.id=t?.id,this.airline=t?.airline,this.airlineId=t?.airlineId,this.flightNumber=t?.flightNumber,this.direction=t?.direction||"",this.type=t?.type||e,this.dateTime=t?.dateTime,this.filter=null}getFilter(){return`${this.airline?.name}_${this.flightNumber}_${this.direction}`}}var U={name:"flight-edit-form",data(){return{dialogVisible:!1,flightEdit:null,pickerOptions:{firstDayOfWeek:1,disabledDate(t){return t.getTime()<(new Date).setDate((new Date).getDate()-1)}},rules:{dateTime:[{required:!0,message:"Укажите дату",trigger:"change"}],airlineId:[{required:!0,message:"Выберите авиакомпанию",trigger:"change"}],flightNumber:[{required:!0,message:"Введите номер рейса",trigger:"blur"}],direction:[{required:!0,message:"Укажите направление",trigger:"change"}]}}},computed:{...(0,k.Se)(["dictionary","flights"]),airlines(){return this.flightEdit?.airlineId&&!this.dictionary.airlines.length?[this.flightEdit?.airline]:this.dictionary.airlines},titles(){return{direction:"arrival"===this.flights?.type?"Укажите город отправления":"Укажите город назначения",dateTime:"arrival"===this.flights?.type?"Укажите время прилёта":"Укажите время вылета",dialogTitle:"arrival"===this.flights?.type?"Редактирования прилета":"Редактирование вылета",saveButton:this.flightEdit?.id?"Сохранить вылет":"Добавить вылет"}}},methods:{open(t){this.flightEdit=t?new R(t):new R(null,this.flights.type),this.dialogVisible=!0},closed(){this.flightEdit=null},getAirlines(t){this.$store.dispatch(C,t)},citySuggestion(t,e){this.$store.dispatch(x,this.capitalize(t)),e(this.dictionary.cities)},setAirline(t){this.flightEdit.airline=this.dictionary.airlines.find((e=>e.id===t))},cityHandleSelect(t){this.flightEdit.direction=t},submitForm(){this.$refs.flightForm.validate((t=>{if(t){this.flightEdit.filter=this.flightEdit.getFilter();const{...t}=this.flightEdit;t.dateTime=this.$dayjs(t.dateTime).format("YYYY-MM-DDTHH:mm:ss"),t.id||delete t.id,t.id?this.saveFlight(t):this.addFlight(t)}return!1}))},addFlight(t){this.$store.dispatch(O,t).then((()=>{this.$message({message:"Рейс успешно добавлен",type:"success"}),this.dialogVisible=!1}))},saveFlight(t){this.$store.dispatch(L,t).then((()=>{this.$message({message:"Рейс успешно сохранен",type:"success"}),this.dialogVisible=!1}))},capitalize(t){return`${t[0]?.toUpperCase()}${t.slice(1)}`}}},G=U,z=(0,y.Z)(G,H,V,!1,null,"964b924e",null),M=z.exports,J={name:"scoreboard-table",components:{FlightEditForm:M},data(){return{searchQuery:""}},computed:{...(0,k.Se)(["flights","dictionary"]),search(){return this.flights.items.filter((t=>t?.filter.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{openDialogEditForm(t){this.$refs.dialogEditForm.open(t)},handleDelete(t){this.$store.dispatch(j,t)},statusTitle(t){return this.$dayjs().isAfter(this.$dayjs(t))?"Прибыл":"Ожидается"},statusColor(t){return{green:this.$dayjs().isAfter(this.$dayjs(t))}}}},Q=J,q=(0,y.Z)(Q,P,Z,!1,null,"26a13c32",null),Y=q.exports,B={name:"scoreboard-arrival",components:{ScoreboardTable:Y},created(){this.$store.commit(N,"arrival"),this.$store.dispatch(D,"arrival")}},K=B,X=(0,y.Z)(K,$,F,!1,null,"14835724",null),W=X.exports,tt=function(){var t=this,e=t._self._c;return e("scoreboard-table")},et=[],it={name:"scoreboard-departure",components:{ScoreboardTable:Y},created(){this.$store.commit(N,"departure"),this.$store.dispatch(D)}},at=it,rt=(0,y.Z)(at,tt,et,!1,null,"586afc28",null),st=rt.exports,ot={name:"ScoreboardView",components:{ScoreboardDeparture:st,ScoreboardArrival:W},data(){return{component:"ScoreboardDeparture"}},created(){this.$route.query.admin&&this.changeRole()},computed:{...(0,k.Se)(["dictionary"]),userIcon(){return this.dictionary.isAdmin?"el-icon-s-custom":"el-icon-user"},changeRoleTitle(){return this.dictionary.isAdmin?"Переключиться в режим пользователя":"Переключиться в режим администратора"}},methods:{changeRole(){this.$store.commit(I)}}},nt=ot,lt=(0,y.Z)(nt,S,T,!1,null,null,null),ct=lt.exports;a["default"].use(E.ZP);const dt=[{path:"/",name:"scoreboard",component:ct}],ut=new E.ZP({mode:"history",base:"/",routes:dt});var ft=ut,ht=(i(7658),i(7795)),pt=i(36);const mt={apiKey:"AIzaSyANC3ujkVpixUF_ctmn15n0KESNVpmmGIA",authDomain:"airport-scoreboard.firebaseapp.com",databaseURL:"https://airport-scoreboard-default-rtdb.europe-west1.firebasedatabase.app",projectId:"airport-scoreboard",storageBucket:"airport-scoreboard.appspot.com",messagingSenderId:"810866443431",appId:"1:810866443431:web:b4d060fdf74ac8b0a8c782"},gt=(0,ht.ZF)(mt),bt=(0,pt.ad)(gt),yt={flights:{items:[],type:"",loading:!1}},vt={flights:()=>yt.flights},_t={async[D]({commit:t}){t(D);const e=(0,pt.IO)((0,pt.hJ)(bt,"flights"),(0,pt.ar)("type","==",yt.flights.type),(0,pt.Xo)("dateTime")),i=await(0,pt.PL)(e);if(i.empty)t(A,[]);else{const e=[];i.forEach((t=>{const i=t.data();i.id=t.id,e.push(i)})),t(A,e)}},async[O]({dispatch:t},e){const i=await(0,pt.ET)((0,pt.hJ)(bt,"flights"),e);return t(D),i},async[L]({dispatch:t},e){await(0,pt.pl)((0,pt.JU)(bt,"flights",e.id),e),t(D)},async[j]({dispatch:t},e){await(0,pt.oe)((0,pt.JU)(bt,"flights",e.id)),t(D)}},wt={[D]:t=>{t.flights.loading=!0},[A]:(t,e)=>{t.flights.items=e,t.flights.loading=!1},[N]:(t,e)=>{t.flights.type=e}};var Et={state:yt,getters:vt,actions:_t,mutations:wt};const St={apiKey:"AIzaSyANC3ujkVpixUF_ctmn15n0KESNVpmmGIA",authDomain:"airport-scoreboard.firebaseapp.com",databaseURL:"https://airport-scoreboard-default-rtdb.europe-west1.firebasedatabase.app",projectId:"airport-scoreboard",storageBucket:"airport-scoreboard.appspot.com",messagingSenderId:"810866443431",appId:"1:810866443431:web:b4d060fdf74ac8b0a8c782"},Tt=(0,ht.ZF)(St),kt=(0,pt.ad)(Tt),xt={dictionary:{cities:[],airlines:[],isAdmin:!1}},Ct={dictionary:()=>xt.dictionary},It={async[x]({commit:t},e){const i=(0,pt.IO)((0,pt.hJ)(kt,"cities"),(0,pt.ar)("name",">=",e),(0,pt.Xo)("name"),(0,pt.b9)(10)),a=await(0,pt.PL)(i);if(a.empty)t(x,[]);else{const e=[];a.forEach((t=>{e.push(t.data())})),t(x,e)}},async[C]({commit:t},e){const i=(0,pt.IO)((0,pt.hJ)(kt,"airlines"),(0,pt.ar)("name",">=",e),(0,pt.Xo)("name"),(0,pt.b9)(10)),a=await(0,pt.PL)(i);if(a.empty)t(C,[]);else{const e=[];a.forEach((t=>{const i=t.data();i.logoLink&&(i.id=t.id,e.push(i))})),t(C,e)}}},$t={[x]:(t,e)=>{t.dictionary.cities=e.map((t=>t.name))},[C]:(t,e)=>{t.dictionary.airlines=e},[I]:t=>{t.dictionary.isAdmin=!t.dictionary.isAdmin}};var Ft={state:xt,getters:Ct,actions:It,mutations:$t};a["default"].use(k.ZP);var Dt=new k.ZP.Store({modules:{Flights:Et,Dictionary:Ft}});c().locale("ru"),c().extend(h()),c().extend(m()),c().extend(u()),a["default"].prototype.$dayjs=c(),o["default"].use(n.Z),a["default"].use(s()),a["default"].config.productionTip=!1,new a["default"]({router:ft,store:Dt,render:t=>t(w)}).$mount("#app")}},e={};function i(a){var r=e[a];if(void 0!==r)return r.exports;var s=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}i.m=t,function(){var t=[];i.O=function(e,a,r,s){if(!a){var o=1/0;for(d=0;d<t.length;d++){a=t[d][0],r=t[d][1],s=t[d][2];for(var n=!0,l=0;l<a.length;l++)(!1&s||o>=s)&&Object.keys(i.O).every((function(t){return i.O[t](a[l])}))?a.splice(l--,1):(n=!1,s<o&&(o=s));if(n){t.splice(d--,1);var c=r();void 0!==c&&(e=c)}}return e}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[a,r,s]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var a in e)i.o(e,a)&&!i.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){i.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,a){var r,s,o=a[0],n=a[1],l=a[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(r in n)i.o(n,r)&&(i.m[r]=n[r]);if(l)var d=l(i)}for(e&&e(a);c<o.length;c++)s=o[c],i.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return i.O(d)},a=self["webpackChunkairport_scoreboard"]=self["webpackChunkairport_scoreboard"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=i.O(void 0,[998],(function(){return i(406)}));a=i.O(a)})();
//# sourceMappingURL=app.7658c99c.js.map